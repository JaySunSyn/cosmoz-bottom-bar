<link rel="import" href="cosmoz-bottom-bar.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../cosmoz-viewinfo/cosmoz-viewinfo.html">

<!--
`cosmoz-bottom-bar-view` contains a content section and a bottom bar with actions.

__Important:__ The `cosmoz-bottom-bar-view` will not display if its parent does not have a height.

-->

<dom-module id="cosmoz-bottom-bar-view">
	<style type="text/css">

		:host {
			display: block;
			position: relative;
			overflow: hidden;
			@apply(--layout-flex);
		}

		#scroller {
			@apply(--layout-fit);
			@apply(--layout-vertical);
			-webkit-overflow-scrolling: touch;

			overflow-x: hidden;
			overflow-y: auto;
		}

		#scroller ::content .cosmoz-bottom-bar-scroll {
			/* HACK(pasleq): setting flex-basis to a value results in a incorrect layout when minimizing the window on Chrome
				Using flex-basis: auto; solves the issue. */
			@apply(--layout-flex-auto);
			@apply(--layout-vertical);
			position: relative;
		}

	</style>
	<template>
		<div id="scroller">
			<content id="scrollerContent" select=".cosmoz-bottom-bar-scroll"></content>
			<div id="bottomBarPlaceHolder" style$="{{_getBarHeight(viewInfo.desktop)}}"></div>
		</div>
		<cosmoz-bottom-bar id="bar" fixed$="{{ viewInfo.desktop }}" scroller="{{ scroller }}" scroller-overflow="{{ overflowing }}">
			<content></content>
		</cosmoz-bottom-bar>
	</template>
	<script src="cosmoz-bottom-bar-view.js" type="text/javascript"></script>
</dom-module>